@page "/update-user-detail/{userId:int}"

@inject NavigationManager NavigationManager
@inject IUserService UserServices
@inject IUserProfileService UserProfileServices

<PageTitle>Update detail</PageTitle>

<EditForm Model="@user" OnValidSubmit="Update">
	<DataAnnotationsValidator />

</EditForm>

@code {
	[Parameter]
	public int userId { get; set; }
	protected UserEntity user = new();
	protected UserProfileEntity userProfile = new();

	protected override async Task OnParametersSetAsync()
	{
		var userList = UserProfileServices.GetAllUserProfiles();
		userProfile = userList.Where(x => x.Id == userId).FirstOrDefault();
	}

	protected async Task Update()
	{
		if (user.Id < 1)
		{
			return;
		}

		UserProfileServices.UpdateUserProfile(userId);
		NavigationManager.NavigateTo($"/user-detail/{user.Id.ToString()}");
	}

	protected void Cancel()
	{
		
	}
}